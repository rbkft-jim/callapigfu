name: Debug OIDC Claims
on:
  push:
    branches:
    - main
jobs:
  debug_claims:
    # 1. Ajoutez la permission obligatoire
    permissions:
      id-token: write
      contents: read # Facultatif, mais souvent requis
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. Utilisation de l'action de remplacement
      - name: Afficher les revendications OIDC (Debug communautaire)
        uses: mike-engel/oidc-debugger@v1 
        with:
          # L'audience doit correspondre Ã  votre fournisseur GCP.
          # Par exemple : 'https://iam.googleapis.com/projects/1234567890/locations/global/workloadIdentityPools/github-pool/providers/github-provider'
          audience: 'https://iam.googleapis.com/projects/793834297925/locations/global/workloadIdentityPools/my-pool/providers/my-provider'
